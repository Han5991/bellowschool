<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{/layout/basic :: setContent(~{this::content} )}">
    <th:block th:fragment="content">
        <link href="css/treejs.css" rel="stylesheet">
        <script src="js/tree.js"></script>
        <div class="container-fluid">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h3 class="m-0 font-weight-bold text-primary">풀무야간학교 물품 대장</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div id="container" class="col-lg-4"></div>
                        <div class="col-lg-8">
                            <table class="table table-hover">
                                <tr>
                                    <td>관리번호</td>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <td>물품분류</td>
                                    <td>비품</td>
                                </tr>
                                <tr>
                                    <td>보관장소</td>
                                    <td>교무실</td>
                                </tr>
                                <tr>
                                    <td>물품명</td>
                                    <td>노트북</td>
                                </tr>
                                <tr>
                                    <td>수량</td>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <td>가격</td>
                                    <td>1,600,000원</td>
                                </tr>
                                <tr>
                                    <td>구입일자</td>
                                    <td>2021-07-15</td>
                                </tr>

                            </table>
                        </div>
                        <div class="col-lg-4">
                        </div>
                        <div class="col-lg-8">
                            <div id="options">
                                <a href="#" class="btn btn-outline-info"
                                   onclick="n2.addChild(new TreeNode('' + count++)); view.reload();">Add
                                    new element</a>
                                <a href="#" class="btn btn-outline-info"
                                   onclick="if(n2.isLeaf()) return; n2.removeChild(n2.getChildren()[n2.getChildCount()-1]); count--; view.reload();">Remove
                                    element</a>
                                <a href="#" class="btn btn-outline-info"
                                   onclick="view.expandAllNodes(); view.reload();">Expand nodes</a>
                                <a href="#" class="btn btn-outline-info"
                                   onclick="view.collapseAllNodes(); view.reload();">Collapse
                                    nodes</a>
                                <a href="#" class="btn btn-outline-info"
                                   onclick="view.changeOption('show_root', !TreeUtil.getProperty(view.getOptions(), 'show_root', true)); view.reload();">Toggle
                                    show root</a>
                                <br>
                                <a href="#" class="btn btn-outline-info"
                                   onclick="alert(view.getSelectedNodes().join('; '));">Show
                                    selected
                                    nodes</a>
                                <a href="#" class="btn btn-outline-info"
                                   onclick="root.toggleSelected(); view.reload();">Toggle
                                    selected</a>
                                <a href="#" class="btn btn-outline-info" onclick="n3.toggleEnabled(); view.reload();">Toggle
                                    enabled</a>
                                <a href="#" class="btn btn-outline-info"
                                   onclick="n11.changeOption('forceParent', !TreeUtil.getProperty(n11.getOptions(), 'forceParent', false)); view.reload();">Toggle
                                    force parent</a>
                                <br>
                                <a href="#" class="btn btn-outline-info"
                                   onclick="changeIcons(this.innerHTML == 'Font-Awesome icons'); if(this.innerHTML == 'Font-Awesome icons') this.innerHTML = 'Default icons'; else this.innerHTML = 'Font-Awesome icons'">Font-Awesome
                                    icons</a>
                                <a href="#" class="btn btn-outline-info"
                                   onclick="toggleCustomIcon(TreeUtil.getProperty(root.getOptions(), 'icon', true));">Change
                                    custom icon</a>
                                <div id="description">
                                    All of the options used here are specified in the <a
                                        href="https://github.com/m-thalmann/treejs/blob/master/README.md"
                                        target="_blank">readme-File</a>.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 일정 추가 MODAL -->
        <div class="modal add" tabindex="-1" role="dialog" id="eventModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">사주세요!</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                                onclick="paramsReset()"><span
                                aria-hidden="true">&times;</span></button>
                    </div>
                    <div class="modal-body">
                        <table class="table" id="pleaseBuy">
                            <tr>
                                <td class="align-middle">번호</td>
                                <td id="pleaseBuyId"></td>
                            </tr>
                            <tr>
                                <td class="align-middle">상태</td>
                                <td>
                                    <select class="form-control" id="pleaseBuyStatus">
                                        <option value="0">구매신청</option>
                                        <option value="1">구매접수</option>
                                        <option value="2">구매중</option>
                                        <option value="3">구매완료</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="align-middle">물품종류</td>
                                <td>
                                    <select class="form-control" id="pleaseBuyType">
                                        <option value="0">간식</option>
                                        <option value="1">문구류</option>
                                        <option value="2">비품류</option>
                                        <option value="3">기타</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="align-middle">물품명</td>
                                <td><input type="text" class="form-control" id="pleaseBuyGoods"></td>
                            </tr>
                            <tr>
                                <td class="align-middle">갯수</td>
                                <td><input type="number" class="form-control" id="pleaseBuyCount" value="1"
                                           onchange="sum()"></td>
                            </tr>
                            <tr>
                                <td class="align-middle">개당가격</td>
                                <td><input type="number" class="form-control" id="pleaseBuyPrice" value="0"
                                           onchange="sum()"></td>
                            </tr>
                            <tr>
                                <td class="align-middle">합계</td>
                                <td><input type="number" class="form-control" id="pleaseBuySum" disabled value="0"></td>
                            </tr>
                            <tr>
                                <td class="align-middle">옵션</td>
                                <td><input type="text" class="form-control" id="pleaseBuyOption"></td>
                            </tr>
                            <tr>
                                <td class="align-middle">택배회사</td>
                                <td>
                                    <select class="form-control" id="pleaseBuyCompany">
                                        <option value="0">CJ대한통운</option>
                                        <option value="1">한진</option>
                                        <option value="2">롯대글로벌로지스</option>
                                        <option value="3">우체국택배</option>
                                        <option value="4">로젠택배</option>
                                        <option value="5">기타</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="align-middle">송장번호</td>
                                <td><input type="text" class="form-control" id="pleaseBuyInvoice"></td>
                            </tr>
                            <tr>
                                <td class="align-middle">신청일자</td>
                                <td><input type="date" class="form-control" disabled id="pleaseBuyStart"></td>
                            </tr>
                            <tr>
                                <td class="align-middle">배송예정일</td>
                                <td><input type="date" class="form-control" id="pleaseBuyEnd"></td>
                            </tr>
                        </table>
                    </div>
                    <div class="modal-footer modalBtnContainer-addEvent">
                        <button type="button" class="btn btn-default" data-dismiss="modal" onclick="paramsReset()">닫기
                        </button>
                        <button type="button" class="btn btn-primary" id="save-event" onclick="regPleaseBuy()">저장
                        </button>
                    </div>
                    <div class="modal-footer modalBtnContainer-modifyEvent">
                        <button type="button" class="btn btn-default" data-dismiss="modal" onclick="paramsReset()">닫기
                        </button>
                        <button type="button" class="btn btn-danger" id="delete-Event" onclick="deletePleaseBuy()">삭제
                        </button>
                        <button type="button" class="btn btn-primary" id="update-Event" onclick="updatePleaseBuy()">저장
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            let data = {
                id: 0,
                goods: '노트북'
            };
            var count = 1;

            var root = new TreeNode("야학물품대장");
            var n1 = new TreeNode("교무실");
            var n11 = new TreeNode("1.1");
            var n12 = new TreeNode(data.goods,data);

            var n2 = new TreeNode("큰교실");
            var n3 = new TreeNode("작은교실");
            var n31 = new TreeNode("3.1");
            var n32 = new TreeNode("3.2");
            var n321 = new TreeNode("3.2.1");
            var n33 = new TreeNode("3.3");
            var n4 = new TreeNode("화장실창고");

            root.addChild(n1);
            root.addChild(n2);
            root.addChild(n3);
            root.addChild(n4);
            n12.on('click', function () {
                console.log(n12.getOptions());
            });

            root.getChildren()[0].addChild(n12);

            n1.addChild(n11);
            n1.addChild(n12);
            n2.addChild(n11);
            n4.addChild(n11);

            n3.addChild(n31);
            n3.addChild(n32);
            n3.addChild(n33);

            // n3.setEnabled(false);

            n32.addChild(n321);

            var view = new TreeView(root, "#container");

            function changeIcons(fa_icons) {
                if (fa_icons) {
                    view.changeOption("leaf_icon", '<i class="fas fa-file"></i>');
                    view.changeOption("parent_icon", '<i class="fas fa-folder"></i>');

                    TreeConfig.open_icon = '<i class="fas fa-angle-down"></i>';
                    TreeConfig.close_icon = '<i class="fas fa-angle-right"></i>';
                } else {
                    view.changeOption("leaf_icon", undefined);
                    view.changeOption("parent_icon", undefined);

                    TreeConfig.open_icon = TreeUtil.default_open_icon;
                    TreeConfig.close_icon = TreeUtil.default_close_icon;
                }

                view.reload();
            }

            function toggleCustomIcon(n) {
                if (n == true) {
                    root.changeOption("icon", '<i class="fas fa-code-branch"></i>');
                } else {
                    root.changeOption("icon", undefined);
                }

                view.reload();
            }
        </script>
    </th:block>
</th:block>